#!/bin/bash

set -o nounset

manifest() {
  # TODO: Use deps in _tmp
  export PYTHONPATH=.:~/hg/tnet/python:~/hg/json-template/python
  # TODO: build basis package
  py-deps webpipe.webpipe webpipe.file2html
  ls webpipe/*.html webpipe.R webpipe.sh
}

Build() {
  manifest | multi tar _tmp/webpipe.tar.gz
}


export PYTHONPATH=~/hg/tnet/python:~/hg/json-template/python

Test() {
  set -o errexit
  cd webpipe
  ls *_test.py | awk '{ print "./" $0 }' | sh -x -e
  echo PASS
}

# TODO:
# - usage-address.txt should be set

Deploy() {
  # copy basis package somewhere?
  echo
}

"$@"

